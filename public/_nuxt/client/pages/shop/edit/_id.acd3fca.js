(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{437:function(e,t,r){"use strict";r.r(t);r(39),r(40),r(65);var o=r(20),n=r(435),l=r(438),c={props:["id"],components:{Viewer:r(432).default},data:function(){return{profile_id:null,autocomplete:{text:null,items:[],loading:!1,color:"white",label:"Product Type",placeholder:"Search for a product...",prependIcon:"mdi-database-search"},search:"",profile:{name:null,family:null,contact:null,email:null,postal:null,dob:null,products:[]},dobmenu:!1,dob:null,previewDialog:!1,productService:null,profileService:null,saving:!1}},methods:{verify:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.productService.verifyProduct(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},add:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.verify(e.autocomplete.text);case 2:if(!t.sent){t.next=6;break}e.profile.products.push({type:e.autocomplete.text,brand:"",size:"",life:"",cost:"",monthly:"",yearly:""}),e.autocomplete.text=null,e.autocomplete.items=[];case 6:case"end":return t.stop()}}),t)})))()},remove:function(e){this.profile.products.splice(e,1)},queryProducts:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.autocomplete.loading=!0,r.next=3,t.productService.getAvailableProducts();case 3:t.autocomplete.items=r.sent.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())})),t.autocomplete.loading=!1;case 5:case"end":return r.stop()}}),r)})))()},preview:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.saving=!0,!e.profile_id){t.next=10;break}return t.next=4,e.profileService.updateOne({id:e.profile_id},e.profile);case 4:return t.next=6,e.profileService.save();case 6:e.previewDialog||(e.previewDialog=!0),e.$forceUpdate(),t.next=17;break;case 10:return t.next=12,e.profileService.create(e.profile);case 12:return r=t.sent,e.profile_id=r.id,t.next=16,e.profileService.save();case 16:e.previewDialog=!0;case 17:e.saving=!1;case 18:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$router.push("/shop/");case 1:case"end":return t.stop()}}),t)})))()},round:function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},updateCosts:function(e){e.monthly=this.round(e.cost/e.life,2)||0,e.yearly=this.round(12*e.cost/e.life,2)||0}},watch:{search:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=e&&e!==t.autocomplete.text,!r.t0){r.next=4;break}return r.next=4,t.queryProducts(e);case 4:case"end":return r.stop()}}),r)})))()}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.profile_id=e.id,e.profileService=new n.a(e.$fireStore),e.productService=new l.a(e.$fireStore),!e.id){t.next=7;break}return t.next=6,e.profileService.findOne({id:e.id});case 6:e.profile=t.sent;case 7:case"end":return t.stop()}}),t)})))()}},d=r(64),v=r(89),f=r.n(v),m=r(500),x=r(146),h=r(430),w=r(429),_=r(494),k=r(428),y=r(499),$=r(497),V=r(449),C=r(132),S=r(460),R=r(495),D=r(487),O=r(455),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-card",[r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{"prepend-icon":"mdi-account",label:"Name",dense:"",outlined:""},model:{value:e.profile.name,callback:function(t){e.$set(e.profile,"name",t)},expression:"profile.name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{"prepend-icon":"mdi-account-group",label:"Family Member",dense:"",outlined:""},model:{value:e.profile.family,callback:function(t){e.$set(e.profile,"family",t)},expression:"profile.family"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{"prepend-icon":"mdi-phone",label:"Contact No.",dense:"",outlined:""},model:{value:e.profile.contact,callback:function(t){e.$set(e.profile,"contact",t)},expression:"profile.contact"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{"prepend-icon":"mdi-email",label:"Email ID",dense:"",outlined:""},model:{value:e.profile.email,callback:function(t){e.$set(e.profile,"email",t)},expression:"profile.email"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{"prepend-icon":"mdi-mailbox-open",label:"Postal Address",dense:"",outlined:""},model:{value:e.profile.postal,callback:function(t){e.$set(e.profile,"postal",t)},expression:"profile.postal"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-menu",{ref:"dobmenu",attrs:{"close-on-content-click":!1,"return-value":e.profile.dob,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.profile,"dob",t)},"update:return-value":function(t){return e.$set(e.profile,"dob",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"Date of Birth",outlined:"",dense:"","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.profile.dob,callback:function(t){e.$set(e.profile,"dob",t)},expression:"profile.dob"}},"v-text-field",n,!1),o))]}}]),model:{value:e.dobmenu,callback:function(t){e.dobmenu=t},expression:"dobmenu"}},[e._v(" "),r("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.profile.dob,callback:function(t){e.$set(e.profile,"dob",t)},expression:"profile.dob"}},[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dobmenu=!1}}},[e._v("Cancel")]),e._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dobmenu.save(e.profile.dob)}}},[e._v("OK")])],1)],1)],1)],1),e._v(" "),r("v-autocomplete",{attrs:{items:e.autocomplete.items,loading:e.autocomplete.loading,"search-input":e.search,color:e.autocomplete.color,"hide-no-data":"","hide-selected":"",label:e.autocomplete.label,placeholder:e.autocomplete.placeholder,"prepend-icon":e.autocomplete.prependIcon,"return-object":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add(t)}},model:{value:e.autocomplete.text,callback:function(t){e.$set(e.autocomplete,"text",t)},expression:"autocomplete.text"}}),e._v(" "),r("v-divider"),e._v(" "),r("v-row",[e._l(e.profile.products,(function(t,o){return r("v-col",{key:o,attrs:{cols:"12"}},[r("v-row",[r("v-col",{attrs:{cols:"2"}},[r("v-text-field",{attrs:{dense:"",value:t.type,outlined:"",disabled:""}})],1),e._v(" "),r("v-col",{attrs:{cols:"2"}},[r("v-text-field",{attrs:{dense:"",label:"Brand",outlined:""},model:{value:t.brand,callback:function(r){e.$set(t,"brand",r)},expression:"product.brand"}})],1),e._v(" "),r("v-col",{attrs:{cols:"1"}},[r("v-text-field",{attrs:{dense:"",label:"Size",outlined:""},model:{value:t.size,callback:function(r){e.$set(t,"size",r)},expression:"product.size"}})],1),e._v(" "),r("v-col",{attrs:{cols:"1"}},[r("v-text-field",{attrs:{dense:"",label:"Life",outlined:""},on:{input:function(r){return e.updateCosts(t)}},model:{value:t.life,callback:function(r){e.$set(t,"life",r)},expression:"product.life"}})],1),e._v(" "),r("v-col",{attrs:{cols:"1"}},[r("v-text-field",{attrs:{dense:"",label:"Cost",outlined:""},on:{input:function(r){return e.updateCosts(t)}},model:{value:t.cost,callback:function(r){e.$set(t,"cost",r)},expression:"product.cost"}})],1),e._v(" "),r("v-col",{attrs:{cols:"2"}},[r("v-text-field",{attrs:{dense:"",label:"Monthly",outlined:"",disabled:""},model:{value:t.monthly,callback:function(r){e.$set(t,"monthly",r)},expression:"product.monthly"}})],1),e._v(" "),r("v-col",{attrs:{cols:"2"}},[r("v-text-field",{attrs:{dense:"",label:"Yearly",outlined:"",disabled:""},model:{value:t.yearly,callback:function(r){e.$set(t,"yearly",r)},expression:"product.yearly"}})],1),e._v(" "),r("v-col",{attrs:{cols:"1"}},[r("v-btn",{attrs:{color:"red",icon:""},on:{click:function(t){return e.remove(o)}}},[r("v-icon",[e._v("\n                                    mdi-delete\n                                ")])],1)],1)],1)],1)})),e._v(" "),e.profile.products.length?e._e():r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e._v("\n                    Add a product\n                ")])],2)],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{disabled:e.saving,color:"primary"},on:{click:e.preview}},[e._v("\n                save\n            ")])],1)],1),e._v(" "),r("v-dialog",{model:{value:e.previewDialog,callback:function(t){e.previewDialog=t},expression:"previewDialog"}},[r("v-card",[r("v-card-title",[e._v("Preview")]),e._v(" "),r("v-card-text",[r("viewer",{ref:"viewer",attrs:{id:e.profile_id}})],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},on:{click:e.save}},[e._v("\n                    done\n                ")]),e._v(" "),r("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.previewDialog=!1}}},[e._v("\n                    update\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{Viewer:r(432).default}),f()(component,{VAutocomplete:m.a,VBtn:x.a,VCard:h.a,VCardActions:w.a,VCardText:w.b,VCardTitle:w.c,VCol:_.a,VContainer:k.a,VDatePicker:y.a,VDialog:$.a,VDivider:V.a,VIcon:C.a,VMenu:S.a,VRow:R.a,VSpacer:D.a,VTextField:O.a})},503:function(e,t,r){"use strict";r.r(t);var o={components:{Editor:r(437).default}},n=r(64),component=Object(n.a)(o,(function(){var e=this.$createElement;return(this._self._c||e)("editor",{attrs:{id:this.$route.params.id}})}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Editor:r(437).default})}}]);